<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aiqin.mgs.order.api.dao.CopartnerAreaRoleDao">
    <select id = "getRoleByUnion" resultType="com.aiqin.mgs.order.api.domain.copartnerArea.CopartnerAreaRoleList">
    select 
      copartner_area_id as copartnerAreaId,
      person_id as personId,
      person_name as personName,
      REPLACE(GROUP_CONCAT(role_name),',','、') as roleName
    from copartner_area_role
    where 1=1
    <if test=" copartnerAreaId !=null and copartnerAreaId !='' ">
         and copartner_area_id = #{copartnerAreaId,jdbcType=VARCHAR}
    </if>
    <if test=" personId !=null and personId !='' ">
         and person_id = #{personId,jdbcType=VARCHAR}
    </if>
    limit 1
    </select>
    
    <select id = "getRoleByPky" resultType="com.aiqin.mgs.order.api.domain.copartnerArea.CopartnerAreaRoleVo">
    select 
      copartner_area_id as copartnerAreaId,
      person_id as personId,
      person_name as personName,
      REPLACE(GROUP_CONCAT(role_code),',','、') as roleCode
    from copartner_area_role
    where 1=1
    <if test=" copartnerAreaId !=null and copartnerAreaId !='' ">
         and copartner_area_id = #{copartnerAreaId,jdbcType=VARCHAR}
    </if>
    <if test=" personId !=null and personId !='' ">
         and person_id = #{personId,jdbcType=VARCHAR}
    </if>
    <if test=" roleType !=null ">
         and role_type = #{roleType,jdbcType=TINYINT}
    </if>
    limit 1
    </select>
</mapper>

