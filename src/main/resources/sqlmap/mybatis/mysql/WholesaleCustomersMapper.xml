<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aiqin.mgs.order.api.dao.wholesale.WholesaleCustomersDao">


    <!--批发客户列表-->
    <select id="list" resultType="com.aiqin.mgs.order.api.domain.wholesale.WholesaleCustomers"
            parameterType="com.aiqin.mgs.order.api.domain.wholesale.WholesaleCustomers">
            SELECT
                customer_code as customerCode,
                customer_name as customerName,
                contact_person as contactPerson,
                phone_number as phoneNumber,
                identity_number as identityNumber,
                province_id as provinceId,
                province_name as provinceName,
                city_id as cityId,
                city_name as cityName,
                district_id as districtId,
                district_name as districtName,
                street_address as streetAddress,
                company_code as companyCode,
                company_name as companyName,
                use_status as useStatus,
                affiliated_company as affiliatedCompany,
                invite_people_code as invitePeopleCode,
                invite_people_name as invitePeopleName,
                create_by as createBy,
                update_by as updateBy,
                DATE_FORMAT( create_time, '%Y-%m-%d %h:%i:%s' ) createTime,
                DATE_FORMAT( update_time, '%Y-%m-%d %h:%i:%s' ) updateTime
            FROM
                wholesale_customers
            <where>
                1=1
                <if test="customerCode != '' and customerCode != null">
                    and customer_code =like CONCAT(CONCAT('',#{customerCode}),'%')
                </if>
                <if test="customerName != '' and customerName != null">
                    and customer_name =like CONCAT(CONCAT('',#{customerName}),'%')
                </if>
                <if test="phoneNumber != '' and phoneNumber != null">
                    and phone_number =like CONCAT(CONCAT('',#{phoneNumber}),'%')
                </if>
                <if test="provinceId != '' and provinceId != null">
                    and province_id = #{provinceId}
                </if>
                <if test="cityId != '' and cityId != null">
                    and city_id = #{cityId}
                </if>
                <if test="districtId != '' and districtId != null">
                    and district_id = #{districtId}
                </if>
                ORDER BY create_time DESC
                <if test="pageSize!=null ">
                    limit #{beginIndex,jdbcType=INTEGER}, #{pageSize,jdbcType=INTEGER}
                </if>
            </where>

    </select>
    <!--批发客户总条数-->
    <select id="totalCount" resultType="java.lang.Integer">
        SELECT
        COUNT(1)
        FROM
        wholesale_customers
        <where>
            1=1
            <if test="customerCode != '' and customerCode != null">
                and customer_code =like CONCAT(CONCAT('',#{customerCode}),'%')
            </if>
            <if test="customerName != '' and customerName != null">
                and customer_name =like CONCAT(CONCAT('',#{customerName}),'%')
            </if>
            <if test="phoneNumber != '' and phoneNumber != null">
                and phone_number =like CONCAT(CONCAT('',#{phoneNumber}),'%')
            </if>
            <if test="provinceId != '' and provinceId != null">
                and province_id = #{provinceId}
            </if>
            <if test="cityId != '' and cityId != null">
                and city_id = #{cityId}
            </if>
            <if test="districtId != '' and districtId != null">
                and district_id = #{districtId}
            </if>
        </where>
    </select>

    <!--新增批发客户-->
    <insert id="insert" parameterType="com.aiqin.mgs.order.api.domain.wholesale.WholesaleCustomers">
        INSERT INTO wholesale_customers (
            customer_code,
            customer_name,
            contact_person,
            phone_number,
            identity_number,
            province_id,
            province_name,
            city_id,
            city_name,
            district_id,
            district_name,
            street_address,
            company_code company_name,
            use_status,
            affiliated_company,
            invite_people_code,
            invite_people_name,
            create_by,
            update_by,
            create_time,
            update_time
        )
        values
        ( #{customer_code},#{customer_name},#{contact_person},#{phone_number},#{identity_number},#{province_id},
        #{province_name},#{city_id},#{city_name},#{district_id},#{district_name},#{street_address},
        #{company_code company_name},#{use_status},#{affiliated_company},#{invite_people_code},#{invite_people_name},
        #{create_by},#{update_by},sysdate(),sysdate()}
	    )
    </insert>
</mapper>

